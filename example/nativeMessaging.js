function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(){var e=!1,t=null,n=window.console||{log:function(){return!0},error:function(){document.write(v)}};"undefined"==typeof _sp_&&n.error("_sp_ - object undefined");var o,r,a,s="2.0.0",c="nativeqr",i=Q("consentUUID"),p=Q("sp_su"),d=Q("authId")||_sp_.config.authId,u=Math.floor(1e6*Math.random()),g=(_sp_.config.baseEndpoint,_sp_.config.propertyHref),l=_sp_.config.propertyId,f=_sp_.config.accountId,m=_sp_.config.consentLanguage||"EN",_=_sp_.config.isSPA,y=(_sp_.config.isJSONp,_sp_.config.baseEndpoint.replace(/\/+$/,"")),S=Q("consentDate_"+l),h=X("euconsent-v2_"+l),I=X("consentStatus_"+l)||null,C=X("localState_"+l);o=y+"/wrapper/v2/meta-data",r={hasCsp:"true",accountId:f,env:"prod",metadata:'{"gdpr":{}}',propertyId:l,scriptVersion:s,scriptType:c},a=JSON.parse(j(H(o,r))),D=a,n.log(D),F("metaData_"+l,D);var D=X("metaData_"+l),w=D.gdpr.applies,O=X("vendorGrants_"+l),R=X("nonKeyedLocalState_"+l),N=X("consentedPurposes_"+l),J=_sp_.config.messageDiv,T=_sp_.config.pmDiv,U=_sp_.config.pmId,b=(U="undefined"!=typeof _sp_&&_sp_.config&&_sp_.config.pmId?_sp_.config.pmId:1196474,!("undefined"==typeof _sp_||!_sp_.config||!0!==_sp_.config.buildMessageComponents)),M=null,A=null,V=(C=null,!1);null==i&&k("consentUUID",i=q(),365),null==d&&k("authId",d=q(),365),window.JSON||(window.JSON={stringify:function(e){var t=_typeof(e);if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,o,r=[],a=e&&e.constructor==Array;for(n in e)"string"==(t=_typeof(o=e[n]))?o='"'+o+'"':"object"==t&&null!==o&&(o=JSON.stringify(o)),r.push((a?"":'"'+n+'":')+String(o));return(a?"[":"{")+String(r)+(a?"]":"}")}}),"function"!=typeof JSON.parse&&(JSON.parse=function(e){try{return new Function("return "+e)()}catch(e){throw new SyntaxError("JSON.parse: ung√ºltiges JSON-Format")}}),window._sp_.config.events=window._sp_.config.events||{};var L=function(e,t){var n=window._sp_.config.events[e];"function"==typeof n&&n.apply(null,t||[])};function x(){L("onConsentReady",[i,h,O,I,N])}function E(e){var t=document.getElementById(e);t&&(t.style.display="block")}function P(e){var t=document.getElementById(e);t&&(t.style.display="none")}function j(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}function B(e,t){var n="object"===_typeof(e)&&e instanceof Date?e:new Date(e),o="object"===_typeof(t)&&t instanceof Date?t:new Date(t),r=n.getTime(),a=o.getTime();return r<a?-1:r>a?1:0}function H(e,t){var n=e+"?",o=[];for(var r in t)t.hasOwnProperty(r)&&o.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n+o.join("&")}function q(){for(var e,t="0123456789abcdef".split(""),n=[],o=Math.random,r=0;r<36;r++)8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(e=0|16*o(),n[r]=t[19===r?3&e|8:e]);return n.join("")}function k(e,t,n){var o="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toUTCString()}document.cookie=e+"="+encodeURIComponent(t)+o+"; path=/"}function K(){if(n.log("startGetMessages"),r=!1,null===I||!I.consentedAll||(null!==S&&(1===B(D.gdpr.legalBasisChangeDate,S)&&(I.legalBasisChanges=!0,r=!0),1===B(D.gdpr.additionsChangeDate,S)&&(I.vendorListAdditions=!0,r=!0)),r)){n.log("notconsentedTOAll requesting message");var t=y+"/wrapper/v2/messages"+"?hasCsp=true&env=prod&body="+G({accountId:f,campaignEnv:"prod",campaigns:{gdpr:{consentStatus:I,hasLocalData:e,targetingParams:{}}},clientMMSOrigin:y,hasCSP:!0,includeData:{localState:{type:"string"},actions:{type:"RecordString"},cookies:{type:"RecordString"}},propertyHref:g,propertyId:l,authId:d})+"&localState="+G(C)+"&metadata="+G(D)+"&nonKeyedLocalState="+G(R)+"&ch="+u+"&scriptVersion="+s+"&scriptType="+c,o=JSON.parse(j(t));C=o.localState,F("localState_"+l,JSON.parse(o.localState)),R=o.nonKeyedLocalState,F("nonKeyedLocalState_"+l,JSON.parse(o.nonKeyedLocalState)),!function(e){if(e.campaigns&&Array.isArray(e.campaigns))for(var t=0;t<e.campaigns.length;t++){var n=e.campaigns[t];if(n.message&&n.message.message_json)return A=n.messageMetaData,M=n.messageMetaData.messageId,n.message.message_json}return!1}(o)?x():E(J)}else x();var r;!function(){if(function(e){if(!p){var t=Math.random();p=t<e,k("sp_su",JSON.stringify(p),365)}}(D.gdpr.sampleRate),"true"===p){var e={gdpr:{applies:!0,consentStatus:I,accountId:f,euconsent:h,mmsDomain:y,propertyId:l,siteId:l,pubData:{},uuid:i,sampleRate:D.gdpr.sampleRate,withSiteActions:!0}};A&&(e.gdpr.categoryId=A.categoryId,e.gdpr.subCategoryId=A.subCategoryId,e.gdpr.msgId=A.messageId,e.gdpr.prtnUUID=A.prtnUUID);var t=Y(y+"/wrapper/v2/pv-data?hasCsp=true&env=prod&ch="+u+"&scriptVersion="+s+"&scriptType="+c);t.onreadystatechange=function(){if(4===t.readyState&&200===t.status)JSON.parse(t.responseText);else n.error("error:",t.responseText)},t.send(JSON.stringify(e))}}()}function G(e){return"string"==typeof e?encodeURIComponent(e):encodeURIComponent(JSON.stringify(e))}function F(e,t){if(void 0!==window.localStorage)try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){k(e,JSON.stringify(t),365)}else k(e,JSON.stringify(t),365)}function X(e){if(void 0===window.localStorage)return JSON.parse(decodeURIComponent(Q(e)));try{return JSON.parse(window.localStorage.getItem(e))}catch(t){return JSON.parse(decodeURIComponent(Q(e)))}}function Q(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var o=t[n].trim();if(0===o.indexOf(e+"="))return o.substring((e+"=").length,o.length)}return null}function $(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function z(e){if(void 0!==window.localStorage)try{window.localStorage.removeItem(e)}catch(t){$(e)}else $(e)}function W(e,t,n,o,r,a){I=e,F("consentStatus_"+l,e),i=t,k("consentUUID",t,365),consentDate=n,k("consentDate_"+l,n,365),h=o,F("euconsent-v2_"+l,o),F("vendorGrants_"+l,r),O=r,F("consentedPurposes_"+l,a),N=a,x()}function Y(e){var t=new XMLHttpRequest;return t.open("POST",e,!1),t.setRequestHeader("accept","*/*"),t.setRequestHeader("accept-language","de,en;q=0.9"),t.setRequestHeader("content-type","application/json"),t}function Z(){return _sp_.config.qrUrl+encodeURIComponent(_sp_.config.pmUrl+"?authid="+d+"&consentlanguage="+m+"&propertyid="+l+"&propertyhref="+g+"&accountid="+f+"&pmid="+U)}function ee(){return JSON.parse(j(y+"/consent/tcfv2/vendor-list/categories?siteId="+l+"&consentLanguage="+m))}function te(){return"true"===p}_sp_.executeMessaging=function(){P(T),P(J),K(),n.log("Messaging executed!")},_sp_.loadPrivacyManagerModal=function(){E(T),P(J)},_sp_.acceptAll=function(){P(T),P(J),function(){var e=_sp_.config.baseEndpoint+"/wrapper/v2/choice/consent-all",o={hasCsp:"true",authId:d,accountId:f,env:"prod",includeCustomVendorsRes:"true",metadata:JSON.stringify(D),propertyId:l,withSiteActions:"true",ch:u,scriptVersion:s,scriptType:c},r=[];for(var a in o)o.hasOwnProperty(a)&&r.push(encodeURIComponent(a)+"="+encodeURIComponent(o[a]));var p=j(e+"?"+r.join("&"));(function(e){e.gdpr.consentStatus.granularStatus,t=e.gdpr.consentAllRef,w=e.gdpr.gdprApplies,h=e.gdpr.euconsent,N=e.gdpr.categories;var o=y+"/wrapper/v2/choice/gdpr/11?hasCsp=true&env=prod&ch="+u+"&scriptVersion="+s+"&scriptType="+c,r={accountId:f,applies:w,authId:d,messageId:M,mmsDomain:y,propertyId:l,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:i,sampleRate:D.gdpr.sampleRate,sendPVData:te(),consentAllRef:t,granularStatus:I,vendorListId:e.gdpr.vendorListId},a=Y(o);a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=JSON.parse(a.responseText);W(e.gdpr.consentStatus,t.uuid,t.dateCreated,h,e.gdpr.grants,N)}else n.error("error:",a.responseText)},a.send(JSON.stringify(r))})(JSON.parse(p)),P(J)}()},_sp_.continue=function(){var e,t,o,r;P(T),P(J),e=y+"/consent/tcfv2/consent/v3/"+l+"/li-only",t=JSON.parse(j(e)),o=Y(y+"/wrapper/v2/choice/gdpr/1?hasCsp=true&env=prod&ch="+u+"&scriptVersion="+s+"&scriptType="+c),r={accountId:f,applies:w,authId:d,messageId:M,mmsDomain:y,propertyId:l,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:i,sampleRate:D.gdpr.sampleRate,sendPVData:te(),pmSaveAndExitVariables:t},o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var e=JSON.parse(o.responseText);W(e.consentStatus,e.uuid,e.dateCreated,e.euconsent,e.grants,e.categories)}else n.error("error:",o.responseText)},o.send(JSON.stringify(r))},_sp_.reject=function(){P(T),P(J),function(){var e=y+"/wrapper/v2/choice/reject-all",o={hasCsp:"true",authId:d,accountId:f,env:"prod",includeCustomVendorsRes:"true",metadata:JSON.stringify(D),propertyId:l,withSiteActions:"true",ch:u,scriptVersion:s,scriptType:c},r=[];for(var a in o)o.hasOwnProperty(a)&&r.push(encodeURIComponent(a)+"="+encodeURIComponent(o[a]));var p=j(e+"?"+r.join("&"));(function(e){e.gdpr.consentStatus.granularStatus,t=e.gdpr.consentAllRef,w=e.gdpr.gdprApplies;var o=Y(y+"/wrapper/v2/choice/gdpr/13?hasCsp=true&env=prod&ch="+u+"&scriptVersion="+s+"&scriptType="+c),r={accountId:f,applies:w,authId:d,messageId:M,mmsDomain:y,propertyId:l,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:i,sampleRate:D.gdpr.sampleRate,sendPVData:te()};o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var e=JSON.parse(o.responseText);W(e.consentStatus,e.uuid,e.dateCreated,e.euconsent,e.grants,e.categories)}else n.error("error:",o.responseText)},o.send(JSON.stringify(r))})(JSON.parse(p)),P(J)}()},_sp_.consentStatus=function(){return I},_sp_.getTcString=function(){return h},_sp_.getQrCodeUrl=function(){return Z()},_sp_.getMessageData=function(){return ee()},_sp_.clearUserData=function(){return $("authId"),$("consentUUID"),z("metaData_"+l),$("consentDate_"+l),z("consentStatus_"+l),z("euconsent-v2_"+l),z("localState_"+l),z("nonKeyedLocalState_"+l),z("vendorGrants_"+l),$("sp_su"),!0},_sp_.updateConsentStatus=function(){P(T),P(J),function(){if(n.log(I),null===I||!I.consentedAll){var t=y+"/wrapper/v2/consent-status",o={hasCsp:"true",accountId:f,env:"prod",localState:C,nonKeyedLocalState:R,metadata:JSON.stringify(D),propertyId:l,withSiteActions:"true",authId:d,ch:u,scriptVersion:s,scriptType:c};n.log(o);var r=JSON.parse(j(H(t,o)));n.log(r),void 0!==_typeof(r.consentStatusData.gdpr)&&(e=!0,W(r.consentStatusData.gdpr.consentStatus,r.consentStatusData.gdpr.consentUUID,r.consentStatusData.gdpr.dateCreated,r.consentStatusData.gdpr.euconsent,r.consentStatusData.gdpr.grants,r.consentStatusData.gdpr.categories))}}(),K()},_||_sp_.executeMessaging(),V||function(){if(n.log("buildMessageComponents"),n.log(b),b){var e=ee();!function(e){var t=document.getElementById(_sp_.config.qrId);if(t){var n=(new Date).getTime(),o=-1===e.indexOf("?")?"?":"&";t.src=e+o+"t="+n}}(Z());for(var t=document.getElementsByClassName("all_vendor_count"),o=0;o<t.length;o++)t[o].innerHTML=e.allVendorCount;var r=document.getElementsByClassName("iab_vendor_count");for(o=0;o<r.length;o++)r[o].innerHTML=e.iabVendorCount;var a=document.getElementById("stack_template");if(!a)return void n.error("Template with ID 'stack_template' not found.");for(var s=a.innerHTML,c=document.getElementsByClassName("sp_stacks"),i=document.getElementsByClassName("sp_purposes"),p=document.createDocumentFragment(),d=document.createDocumentFragment(),u=0;u<e.categories.length;u++){var g=e.categories[u],l=s;l=l.replace("{name}",g.name||"").replace("{description}",g.description||"");var f=document.createElement("div");for(f.innerHTML=l;f.firstChild;)"IAB_STACK"===g.type?p.appendChild(f.firstChild):"IAB_PURPOSE"===g.type&&d.appendChild(f.firstChild)}for(var m=0;m<c.length;m++)c[m].appendChild(p.cloneNode(!0));for(m=0;m<i.length;m++)i[m].appendChild(d.cloneNode(!0));V=!0,L("onMessageComposed")}}()}();