function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var env="prod",scriptVersion="3.0.1",scriptType="nativeqr";window.JSON||(window.JSON={stringify:function(e){var n=_typeof(e);if("object"!=n||null===e)return"string"==n&&(e='"'+e+'"'),String(e);var t,o,r=[],a=e&&e.constructor==Array;for(t in e)"string"==(n=_typeof(o=e[t]))?o='"'+o+'"':"object"==n&&null!==o&&(o=JSON.stringify(o)),r.push((a?"":'"'+t+'":')+String(o));return(a?"[":"{")+String(r)+(a?"]":"}")}}),JSON.parse=function(e){try{return new Function("return "+e)()}catch(e){return onError("001","JSON.parse: ungÃ¼ltiges JSON-Format"),null}};var isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};function sp_init(e){window._sp_=window._sp_||{},_sp_.config=e,"function"==typeof _sp_.init?_sp_.init(e):onError("003","No init method found")}Object.keys||(Object.keys=function(e){e!==Object(e)&&onError("002","Object.keys called on a non-object");var n,t=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),function(){window.handleMetaDataForJsonP=function(e){u=e.gdpr.applies,F("metaData_"+a,C=e),A()},window.handleMessageDataForJsonP=function(e){console.log("handleMessageDataForJsonPiscalled"),R=e,z()},window.handleGetMessagesForJsonP=function(e){e.localState,F("localState_"+a,JSON.parse(e.localState)),e.nonKeyedLocalState,F("nonKeyedLocalState_"+a,JSON.parse(e.nonKeyedLocalState)),U(e)?E(l):T()},window.handleGetConsentStatusForJsonP=function(e){void 0!==_typeof(e.consentStatusData.gdpr)&&K(e.consentStatusData.gdpr.consentStatus,e.consentStatusData.gdpr.uuid,e.consentStatusData.gdpr.dateCreated,e.consentStatusData.gdpr.euconsent,e.consentStatusData.gdpr.grants,e.consentStatusData.gdpr.acceptedCategories,e.consentStatusData.gdpr.acceptedVendors,e.consentStatusData.gdpr.legIntVendors,e.consentStatusData.gdpr.legIntCategories)},window.handlePvResponse=function(e){return!0},window.handleAcceptAllResponse=function(e){e&&e.gdpr?B(e):j("Invalid response in handleAcceptAllResponse")},window.handleJsonpAcceptAllCall=function(e){e?K(m,e.uuid,e.dateCreated,f,h,y,_,v,S):j("Invalid response in handleJsonpAcceptAllCall")},window.handleLiOnlyResponse=function(e){k(e)},window.handleLiOnlyCall=function(e){K(e.consentStatus,e.uuid,e.dateCreated,e.euconsent,e.grants,e.acceptedCategories,e.acceptedVendors,e.legIntVendors,e.legIntCategories)},window.handleRejectAllResponse=function(e){q(e)},window.handleRejectAllCall=function(e){K(e.consentStatus,e.uuid,e.dateCreated,e.euconsent,e.grants,e.acceptedCategories,e.acceptedVendors,e.legIntVendors,e.legIntCategories)};var e,n,t,o,r,a,s,c,i,d,p,l,u,g,f,m,y,S,v,_,h,C,I,w,R,D=function(e,n){var t=window._sp_.config.events[e];"function"==typeof t&&t.apply(null,n||[])},O=null,b=null,V=Math.floor(1e6*Math.random()),N=null,J=null;function T(){D("onConsentReady",[n,f,h,m,y])}function A(){D("onMetaDataReceived",[C])}function j(e,n,t){D("onError",[e,n,t])}function E(e){var n=document.getElementById(e);n&&(n.style.display="block",e==d&&D("secondLayerShown"),e==l&&D("firstLayerShown"))}function L(e,n,t){var o,r=document.createElement("script"),a=document.getElementsByTagName("head")[0]||document.body;t&&(o=setTimeout((function(){window[n]=function(){},a.removeChild(r)}),t));var s=e.indexOf("?")>=0?"&":"?";r.src=e+s+"callback="+n,r.onerror=function(){o&&clearTimeout(o),window[n]=function(){},a.removeChild(r),j("009","Script-Error while processing JSONP-Request for "+n)},a.appendChild(r)}function M(e,n,t){var o="";if(t){var r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3),o="; expires="+r.toUTCString(),domain=void 0!==I?"; domain="+I:""}document.cookie=e+"="+encodeURIComponent(n)+o+domain+"; path=/"}function U(e){if(e.campaigns&&Array.isArray(e.campaigns))for(var n=0;n<e.campaigns.length;n++){var t=e.campaigns[n];if(t.message&&t.message.message_json)return J=t.messageMetaData,N=t.messageMetaData.messageId,D("onMessageReceivedData",[J]),t.message.message_json}return!1}function P(e,n,t){var o=proxyEndpoint+"/post"+e,r={hasCsp:!0,env:env,ch:V,scriptVersion:scriptVersion,scriptType:scriptType};L(o+"?body="+encodeURIComponent(JSON.stringify(n))+"&"+W(r),t)}function x(e){if(_sp_.config.qrId){var n=document.getElementById(_sp_.config.qrId);if(n){var t=(new Date).getTime(),o=-1===e.indexOf("?")?"?":"&";n.src=e+o+"t="+t}else j("010","qr ID is missing in config")}}function k(t){var s={accountId:r,applies:u,authId:o,messageId:N,mmsDomain:e,propertyId:a,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:n,sampleRate:C.gdpr.sampleRate,sendPVData:Q(),pmSaveAndExitVariables:t};if(i)P("/wrapper/v2/choice/gdpr/1",s,"handleLiOnlyCall");else{var c=X(e+"/wrapper/v2/choice/gdpr/1?hasCsp=true&env=prod&ch="+V+"&scriptVersion="+scriptVersion+"&scriptType="+scriptType);c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var e=JSON.parse(c.responseText);K(e.consentStatus,e.uuid,e.dateCreated,e.euconsent,e.grants,e.categories,e.vendors,e.legIntVendors,e.legIntCategories)}else j(c.status,c.responseText)},c.send(JSON.stringify(s))}}function q(t){O=t.gdpr.consentStatus.granularStatus,b=t.gdpr.consentAllRef,u=t.gdpr.gdprApplies,f=t.gdpr.euconsent,y=t.gdpr.categories,m=t.gdpr.consentStatus,h=t.gdpr.grants,_=t.gdpr.vendors,v=t.gdpr.legIntVendors,S=t.gdpr.legIntCategories;var s={accountId:r,applies:u,authId:o,messageId:N,mmsDomain:e,propertyId:a,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:n,sampleRate:C.gdpr.sampleRate,sendPVData:Q()},c="/wrapper/v2/choice/gdpr/13";if(i)P(c,s,"handleRejectAllCall");else{var d=X(e+c+"?hasCsp=true&env=prod&ch="+V+"&scriptVersion="+scriptVersion+"&scriptType="+scriptType);d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){var e=JSON.parse(d.responseText);K(e.consentStatus,e.uuid,e.dateCreated,e.euconsent,e.grants,e.categories,e.vendors,e.legIntVendors,e.legIntCategories)}else j("error:",d.responseText)},d.send(JSON.stringify(s))}}function B(t){O=t.gdpr.consentStatus.granularStatus,b=t.gdpr.consentAllRef,u=t.gdpr.gdprApplies,f=t.gdpr.euconsent,y=t.gdpr.categories,m=t.gdpr.consentStatus,h=t.gdpr.grants,_=t.gdpr.vendors,v=t.gdpr.legIntVendors,S=t.gdpr.legIntCategories;var s="/wrapper/v2/choice/gdpr/11",c={accountId:r,applies:u,authId:o,messageId:N,mmsDomain:e,propertyId:a,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:n,sampleRate:C.gdpr.sampleRate,sendPVData:Q(),consentAllRef:b,granularStatus:O,vendorListId:t.gdpr.vendorListId};if(i)P(s,c,"handleJsonpAcceptAllCall");else{var d=X(e+s+"?hasCsp=true&env=prod&ch="+V+"&scriptVersion="+scriptVersion+"&scriptType="+scriptType);d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){var e=JSON.parse(d.responseText);K(t.gdpr.consentStatus,e.uuid,e.dateCreated,f,t.gdpr.grants,t.gdpr.categories,t.gdpr.vendors,t.gdpr.legIntVendors,t.gdpr.legIntCategories)}else j("error:",d.responseText)},d.send(JSON.stringify(c))}}function F(e,n){if(null!=n&&""!==n&&("object"!==_typeof(n)||0!==Object.keys(n).length))if(void 0===window.localStorage||disableLocalStorage)M(e,JSON.stringify(n),365);else try{window.localStorage.setItem(e,JSON.stringify(n))}catch(t){M(e,JSON.stringify(n),365)}}function H(e){if(void 0===window.localStorage||disableLocalStorage)return JSON.parse(decodeURIComponent(G(e)));try{return JSON.parse(window.localStorage.getItem(e))}catch(n){return JSON.parse(decodeURIComponent(G(e)))}}function G(e){for(var n=document.cookie.split(";"),t=0;t<n.length;t++){var o=n[t].trim();if(0===o.indexOf(e+"="))return decodeURIComponent(o.substring((e+"=").length,o.length))}return null}function K(e,t,o,r,s,c,i,d,p){m=e,F("consentStatus_"+a,e),n=t,M("consentUUID",t,365),consentDate=o,M("consentDate_"+a,o,365),f=r,F("euconsent-v2_"+a,r),F("vendorGrants_"+a,s),h=s,F("acceptedCategories_"+a,c),y=c,F("acceptedVendors_"+a,i),_=i,F("legIntCategories_"+a,p),S=p,F("legIntVendors_"+a,d),v=d,D("onConsentStatusReceived",[m]),T()}function X(e){var n=new XMLHttpRequest;return n.open("POST",e,!0),n.setRequestHeader("accept","*/*"),n.setRequestHeader("accept-language","de,en;q=0.9"),n.setRequestHeader("content-type","application/json"),n}function $(){var e="";if(null!=w){var n=(new Date).toISOString();e+="&timestamp="+encodeURIComponent(n),e+="&second_screen_timeout="+encodeURIComponent(w)}return _sp_.config.qrUrl+encodeURIComponent(_sp_.config.pmUrl+"?authid="+o+"&consentlanguage="+c+"&propertyid="+a+"&propertyhref="+s+"&accountid="+r+"&pmid="+p+e)}function z(){if(g){var e=R;x($());for(var n=document.getElementsByClassName("all_vendor_count"),t=0;t<n.length;t++)n[t].innerHTML=e.allVendorCount;var o=document.getElementsByClassName("iab_vendor_count");for(t=0;t<o.length;t++)o[t].innerHTML=e.iabVendorCount;var r=document.getElementById("stack_template");if(!r)return void console.error("Template with ID 'stack_template' not found.");for(var a=r.innerHTML,s=document.getElementsByClassName("sp_stacks"),c=document.getElementsByClassName("sp_purposes"),i=document.createDocumentFragment(),d=document.createDocumentFragment(),p=0;p<e.categories.length;p++){var l=e.categories[p],u=a;u=u.replace("{name}",l.name||"").replace("{description}",l.description||"");var f=document.createElement("div");for(f.innerHTML=u;f.firstChild;)"IAB_STACK"===l.type?i.appendChild(f.firstChild):"IAB_PURPOSE"===l.type&&d.appendChild(f.firstChild)}for(var m=0;m<s.length;m++)s[m].appendChild(i.cloneNode(!0));for(m=0;m<c.length;m++)c[m].appendChild(d.cloneNode(!0));D("onMessageComposed")}}function Q(){return"true"===t}function W(e,n){var t=[],o=function(){if(!e.hasOwnProperty(r))return 1;var o=e[r],a=n?"".concat(n,"[").concat(r,"]"):r;null!==o&&"object"===_typeof(o)?Array.isArray(o)?o.forEach((function(e,n){t.push(W(e,"".concat(a,"[").concat(n,"]")))})):t.push(W(o,a)):t.push("".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(o)))};for(var r in e)o();return t.join("&")}e=_sp_.config.baseEndpoint.replace(/\/+$/,""),_sp_.config.exposeGlobals,disableLocalStorage=_sp_.config.disableLocalStorage,I=_sp_.config.cookieDomain,w=_sp_.config.secondScreenTimeOut,s=_sp_.config.propertyHref,a=_sp_.config.propertyId,G("consentDate_"+a),f=H("euconsent-v2_"+a),m=H("consentStatus_"+a)||null,H("localState_"+a),C=H("metaData_"+a),h=H("vendorGrants_"+a),H("nonKeyedLocalState_"+a),y=H("acceptedCategories_"+a),_=H("acceptedVendors_"+a),S=H("legIntCategories_"+a),v=H("legIntVendors_"+a),config||j("005","No Configuration Found")}();