function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var env="prod",scriptVersion="2.0.7",scriptType="nativeqr";window.JSON||(window.JSON={stringify:function(e){var t=_typeof(e);if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,o,r=[],s=e&&e.constructor==Array;for(n in e)"string"==(t=_typeof(o=e[n]))?o='"'+o+'"':"object"==t&&null!==o&&(o=JSON.stringify(o)),r.push((s?"":'"'+n+'":')+String(o));return(s?"[":"{")+String(r)+(s?"]":"}")}}),"function"!=typeof JSON.parse&&(JSON.parse=function(e){try{return new Function("return "+e)()}catch(e){throw new SyntaxError("JSON.parse: ungültiges JSON-Format")}});var console=window.console||{log:function(){return!0},error:function(){document.write(v)}};function sp_init(e){window._sp_=window._sp_||{},_sp_.config=e,"function"==typeof _sp_.init?_sp_.init(e):console.error("Init-Funktion nicht gefunden. Warte auf _sp_.init.")}!function(){var e,t,n,o,r,s,a,i,c,p,d,u,l,g,f,_,m,y,S,v,w,h,I,C,D=function(e,t){var n=window._sp_.config.events[e];"function"==typeof n&&n.apply(null,t||[])},R=!1,T=null,O=null,N=Math.floor(1e6*Math.random()),U=null,J=null,b=null,V=!1;function L(J){var L,M,j,q,te,ne,oe,re,se,ae,ie,ce,pe,de;(_sp_.config=J,J=J||_sp_&&_sp_.config,window._sp_.config.events=window._sp_.config.events||{},_sp_.version=scriptVersion,r=_sp_.config.accountId,i=_sp_.config.consentLanguage||"EN",c=_sp_.config.isSPA,_sp_.config.isJSONp,e=_sp_.config.baseEndpoint.replace(/\/+$/,""),h=_sp_.config.exposeGlobals,disableLocalStorage=_sp_.config.disableLocalStorage,I=_sp_.config.cookieDomain,C=_sp_.config.secondScreenTimeOut,a=_sp_.config.propertyHref,s=_sp_.config.propertyId,f=Q("consentDate_"+s),_=G("euconsent-v2_"+s),m=G("consentStatus_"+s)||null,b=G("localState_"+s),w=G("metaData_"+s),v=G("vendorGrants_"+s),S=G("nonKeyedLocalState_"+s),y=G("consentedPurposes_"+s),J)?(console.log("Init with following config:",J),t=Q("consentUUID"),n=Q("sp_su"),o=Q("authId")||_sp_.config.authId,null==t&&k("consentUUID",t=H(),365),null==o&&k("authId",o=H(),365),L=e+"/wrapper/v2/meta-data",M={hasCsp:"true",accountId:r,env:"prod",metadata:'{"gdpr":{}}',propertyId:s,scriptVersion:scriptVersion,scriptType:scriptType},j=JSON.parse(P(B(L,M))),D("onMetaDataReceived",[w=j]),F("metaData_"+s,w),l=w.gdpr.applies,u=_sp_.config.messageDiv,p=_sp_.config.pmDiv,d="undefined"!=typeof _sp_&&_sp_.config&&_sp_.config.pmId?_sp_.config.pmId:1196474,g=!("undefined"==typeof _sp_||!_sp_.config||!0!==_sp_.config.buildMessageComponents),q=function(){E(p),E(u),K(),console.log("Messaging executed!")},te=function(){x(p),E(u)},ne=function(){E(p),E(u),function(){var n=e+"/wrapper/v2/choice/consent-all",a={hasCsp:"true",authId:o,accountId:r,env:"prod",includeCustomVendorsRes:"true",metadata:JSON.stringify(w),propertyId:s,withSiteActions:"true",ch:N,scriptVersion:scriptVersion,scriptType:scriptType},i=[];for(var c in a)a.hasOwnProperty(c)&&i.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));var p=P(n+"?"+i.join("&"));!function(n){T=n.gdpr.consentStatus.granularStatus,O=n.gdpr.consentAllRef,l=n.gdpr.gdprApplies,_=n.gdpr.euconsent,y=n.gdpr.categories;var a=e+"/wrapper/v2/choice/gdpr/11?hasCsp=true&env=prod&ch="+N+"&scriptVersion="+scriptVersion+"&scriptType="+scriptType,i={accountId:r,applies:l,authId:o,messageId:U,mmsDomain:e,propertyId:s,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:t,sampleRate:w.gdpr.sampleRate,sendPVData:ee(),consentAllRef:O,granularStatus:T,vendorListId:n.gdpr.vendorListId},c=z(a);c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var e=JSON.parse(c.responseText);$(n.gdpr.consentStatus,e.uuid,e.dateCreated,_,n.gdpr.grants,y)}else console.error("error:",c.responseText)},c.send(JSON.stringify(i))}(JSON.parse(p))}()},oe=function(){var n,a,i,c;E(p),E(u),n=e+"/consent/tcfv2/consent/v3/"+s+"/li-only",a=JSON.parse(P(n)),i=z(e+"/wrapper/v2/choice/gdpr/1?hasCsp=true&env=prod&ch="+N+"&scriptVersion="+scriptVersion+"&scriptType="+scriptType),c={accountId:r,applies:l,authId:o,messageId:U,mmsDomain:e,propertyId:s,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:t,sampleRate:w.gdpr.sampleRate,sendPVData:ee(),pmSaveAndExitVariables:a},i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=JSON.parse(i.responseText);$(e.consentStatus,e.uuid,e.dateCreated,e.euconsent,e.grants,e.categories)}else A(i.status,i.responseText)},i.send(JSON.stringify(c))},re=function(){E(p),E(u),function(){var n=e+"/wrapper/v2/choice/reject-all",a={hasCsp:"true",authId:o,accountId:r,env:"prod",includeCustomVendorsRes:"true",metadata:JSON.stringify(w),propertyId:s,withSiteActions:"true",ch:N,scriptVersion:scriptVersion,scriptType:scriptType},i=[];for(var c in a)a.hasOwnProperty(c)&&i.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));var p=P(n+"?"+i.join("&"));!function(n){T=n.gdpr.consentStatus.granularStatus,O=n.gdpr.consentAllRef,l=n.gdpr.gdprApplies;var a=z(e+"/wrapper/v2/choice/gdpr/13?hasCsp=true&env=prod&ch="+N+"&scriptVersion="+scriptVersion+"&scriptType="+scriptType),i={accountId:r,applies:l,authId:o,messageId:U,mmsDomain:e,propertyId:s,pubData:{},includeData:{actions:{type:"RecordString"},customVendorsResponse:{type:"RecordString"}},uuid:t,sampleRate:w.gdpr.sampleRate,sendPVData:ee()};a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var e=JSON.parse(a.responseText);$(e.consentStatus,e.uuid,e.dateCreated,e.euconsent,e.grants,e.categories)}else console.error("error:",a.responseText)},a.send(JSON.stringify(i))}(JSON.parse(p))}()},se=function(){return m},ae=function(){return _},ie=function(){return Y()},ce=function(){return Z()},pe=function(){return X("authId"),X("consentUUID"),W("metaData_"+s),X("consentDate_"+s),W("consentStatus_"+s),W("euconsent-v2_"+s),W("localState_"+s),W("nonKeyedLocalState_"+s),W("vendorGrants_"+s),X("sp_su"),!0},de=function(){E(p),E(u),function(t){if(null===m||t||!m.consentedAll){var n=e+"/wrapper/v2/consent-status",a={hasCsp:"true",accountId:r,env:"prod",localState:b,nonKeyedLocalState:S,metadata:JSON.stringify(w),propertyId:s,withSiteActions:"true",authId:o,ch:N,scriptVersion:scriptVersion,scriptType:scriptType},i=JSON.parse(P(B(n,a)));void 0!==_typeof(i.consentStatusData.gdpr)&&(R=!0,$(i.consentStatusData.gdpr.consentStatus,i.consentStatusData.gdpr.consentUUID,i.consentStatusData.gdpr.dateCreated,i.consentStatusData.gdpr.euconsent,i.consentStatusData.gdpr.grants,i.consentStatusData.gdpr.categories))}}("true"),K()},_sp_.executeMessaging=q,_sp_.loadPrivacyManagerModal=te,_sp_.acceptAll=ne,_sp_.continue=oe,_sp_.reject=re,_sp_.consentStatus=se,_sp_.getTcString=ae,_sp_.getQrCodeUrl=ie,_sp_.getMessageData=ce,_sp_.clearUserData=pe,_sp_.updateConsentStatus=de,!0===h&&(window.executeMessaging=q,window.loadPrivacyManagerModal=te,window.acceptAll=ne,window.spContinue=oe,window.reject=re,window.consentStatus=se,window.getTcString=ae,window.getQrCodeUrl=ie,window.getMessageData=ce,window.clearUserData=pe,window.updateConsentStatus=de),c||_sp_.executeMessaging(),V||function(){if(g){var e=Z();!function(e){var t=document.getElementById(_sp_.config.qrId);if(t){var n=(new Date).getTime(),o=-1===e.indexOf("?")?"?":"&";t.src=e+o+"t="+n}}(Y());for(var t=document.getElementsByClassName("all_vendor_count"),n=0;n<t.length;n++)t[n].innerHTML=e.allVendorCount;var o=document.getElementsByClassName("iab_vendor_count");for(n=0;n<o.length;n++)o[n].innerHTML=e.iabVendorCount;var r=document.getElementById("stack_template");if(!r)return void console.error("Template with ID 'stack_template' not found.");for(var s=r.innerHTML,a=document.getElementsByClassName("sp_stacks"),i=document.getElementsByClassName("sp_purposes"),c=document.createDocumentFragment(),p=document.createDocumentFragment(),d=0;d<e.categories.length;d++){var u=e.categories[d],l=s;l=l.replace("{name}",u.name||"").replace("{description}",u.description||"");var f=document.createElement("div");for(f.innerHTML=l;f.firstChild;)"IAB_STACK"===u.type?c.appendChild(f.firstChild):"IAB_PURPOSE"===u.type&&p.appendChild(f.firstChild)}for(var _=0;_<a.length;_++)a[_].appendChild(c.cloneNode(!0));for(_=0;_<i.length;_++)i[_].appendChild(p.cloneNode(!0));V=!0,D("onMessageComposed")}}()):A("001","NoConfig")}function M(){D("onConsentReady",[t,_,v,m,y])}function A(e,t){D("onError"[t])}function x(e){var t=document.getElementById(e);t&&(t.style.display="block",e==p&&D("secondLayerShown"),e==u&&D("firstLayerShown"))}function E(e){var t=document.getElementById(e);if(t){var n="none"!==t.style.display&&null!==t.offsetParent;t.style.display="none",e===p&&n&&D("secondLayerClosed"),e===u&&n&&D("firstLayerClosed")}}function P(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}function j(e,t){var n="object"===_typeof(e)&&e instanceof Date?e:new Date(e),o="object"===_typeof(t)&&t instanceof Date?t:new Date(t),r=n.getTime(),s=o.getTime();return r<s?-1:r>s?1:0}function B(e,t){var n=e+"?",o=[];for(var r in t)t.hasOwnProperty(r)&&o.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n+o.join("&")}function H(){for(var e,t="0123456789abcdef".split(""),n=[],o=Math.random,r=0;r<36;r++)8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(e=0|16*o(),n[r]=t[19===r?3&e|8:e]);return n.join("")}function k(e,t,n){var o="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toUTCString(),domain=void 0!==I?"; domain="+I:""}document.cookie=e+"="+encodeURIComponent(t)+o+domain+"; path=/"}function K(){if(c=!1,null===m||!m.consentedAll||(null!==f&&(1===j(w.gdpr.legalBasisChangeDate,f)&&(m.legalBasisChanges=!0,c=!0),1===j(w.gdpr.additionsChangeDate,f)&&(m.vendorListAdditions=!0,c=!0)),c)){var o=e+"/wrapper/v2/messages"+"?hasCsp=true&env=prod&body="+q({accountId:r,campaignEnv:"prod",campaigns:{gdpr:{consentStatus:m,hasLocalData:R,targetingParams:{}}},clientMMSOrigin:e,hasCSP:!0,includeData:{localState:{type:"string"},actions:{type:"RecordString"},cookies:{type:"RecordString"}},propertyHref:a,propertyId:s})+"&localState="+q(b)+"&metadata="+q(w)+"&nonKeyedLocalState="+q(S)+"&ch="+N+"&scriptVersion="+scriptVersion+"&scriptType="+scriptType,i=JSON.parse(P(o));b=i.localState,F("localState_"+s,JSON.parse(i.localState)),S=i.nonKeyedLocalState,F("nonKeyedLocalState_"+s,JSON.parse(i.nonKeyedLocalState)),!function(e){if(e.campaigns&&Array.isArray(e.campaigns))for(var t=0;t<e.campaigns.length;t++){var n=e.campaigns[t];if(n.message&&n.message.message_json)return J=n.messageMetaData,U=n.messageMetaData.messageId,D("onMessageReceivedData",[J]),n.message.message_json}return!1}(i)?M():x(u)}else M();var c;!function(){if(function(e){if(!n){var t=Math.random();n=t<e,k("sp_su",JSON.stringify(n),365)}}(w.gdpr.sampleRate),"true"===n){var o={gdpr:{applies:!0,consentStatus:m,accountId:r,euconsent:_,mmsDomain:e,propertyId:s,siteId:s,pubData:{},uuid:t,sampleRate:w.gdpr.sampleRate,withSiteActions:!0}};J&&(o.gdpr.categoryId=J.categoryId,o.gdpr.subCategoryId=J.subCategoryId,o.gdpr.msgId=J.messageId,o.gdpr.prtnUUID=J.prtnUUID);var a=z(e+"/wrapper/v2/pv-data?hasCsp=true&env=prod&ch="+N+"&scriptVersion="+scriptVersion+"&scriptType="+scriptType);a.onreadystatechange=function(){if(4===a.readyState&&200===a.status)JSON.parse(a.responseText);else console.error("error:",a.responseText)},a.send(JSON.stringify(o))}}()}function q(e){return"string"==typeof e?encodeURIComponent(e):encodeURIComponent(JSON.stringify(e))}function F(e,t){if(void 0===window.localStorage||disableLocalStorage)k(e,JSON.stringify(t),365);else try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){k(e,JSON.stringify(t),365)}}function G(e){if(void 0===window.localStorage||disableLocalStorage)return JSON.parse(decodeURIComponent(Q(e)));try{return JSON.parse(window.localStorage.getItem(e))}catch(t){return JSON.parse(decodeURIComponent(Q(e)))}}function Q(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var o=t[n].trim();if(0===o.indexOf(e+"="))return decodeURIComponent(o.substring((e+"=").length,o.length))}return null}function X(e){var t="";void 0!==I&&(t="; domain="+I),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"+t+"; path=/;"}function W(e){if(void 0===window.localStorage||disableLocalStorage)X(e);else try{window.localStorage.removeItem(e)}catch(t){X(e)}}function $(e,n,o,r,a,i){m=e,F("consentStatus_"+s,e),t=n,k("consentUUID",n,365),consentDate=o,k("consentDate_"+s,o,365),_=r,F("euconsent-v2_"+s,r),F("vendorGrants_"+s,a),v=a,F("consentedPurposes_"+s,i),y=i,D("onConsentStatusReceived",[m]),M()}function z(e){var t=new XMLHttpRequest;return t.open("POST",e,!1),t.setRequestHeader("accept","*/*"),t.setRequestHeader("accept-language","de,en;q=0.9"),t.setRequestHeader("content-type","application/json"),t}function Y(){var e="";if(null!=C){console.log(C);var t=(new Date).toISOString();e+="&timestamp="+encodeURIComponent(t),e+="&secondScreenTimeOut="+encodeURIComponent(C)}else console.log("noTimeout");return _sp_.config.qrUrl+encodeURIComponent(_sp_.config.pmUrl+"?authid="+o+"&consentlanguage="+i+"&propertyid="+s+"&propertyhref="+a+"&accountid="+r+"&pmid="+d+e)}function Z(){return JSON.parse(P(e+"/consent/tcfv2/vendor-list/categories?siteId="+s+"&consentLanguage="+i))}function ee(){return"true"===n}window._sp_=window._sp_||{},window._sp_.init=L,_sp_.config?L(_sp_.config):console.log("Keine globale Konfiguration gefunden – warte auf sp_init(config)...")}();